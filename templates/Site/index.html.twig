{% extends 'Base/base.html.twig' %}

{% import 'Shared/helper.html.twig' as helper %}

{% block body %}
    <h1>{{ 'Sites'|trans }}</h1>

    {{ helper.breadcrumb([ { route: 'site-map', label: 'Map'}, { route: 'site-index', label: 'Overview A-Z' } ]) }}

    <form method="get" action="{{ path(app.request.attributes.get('_route')) }}">
        <div class="form-group">
            {{ form_rest(form) }}
            {#<button type="submit" class="btn btn-primary">{{ 'Search'|trans }}</button>#}
        </div>
    </form>

    {% if pagination.getTotalItemCount > 0 %}
        {% set last_initial = '' %}
        {% for row in pagination %}
            {% set initial = row.name(app.request.locale)|slug|first|upper %}
            {% if initial != last_initial %}
                <h2 class="initial">{{ initial }}</h2>
                {% set last_initial = initial %}
            {% else %}
                <br />
            {% endif %}
            <a href="{{ path('site', { 'id': row.id }) }}">{{ row.name(app.request.locale) }}</a>
        {% endfor %}

        {# display navigation #}
        {{ knp_pagination_render(pagination) }}
    {% else %}
        {{ 'No matching sites found'|trans }}
    {% endif %}
{% endblock %}
